<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BNI — Seek of the Week Submissions</title>

<style>
  :root{
    --bni-red:#cf2030;            /* BNI red */
    --container-w:1200px;         /* Page max width */
    --header-h:30px;              /* <<< Adjust HEADER HEIGHT here */
    --footer-h:30px;              /* <<< Adjust FOOTER HEIGHT here */
    --brand-logo-w:700px;         /* <<< Adjust BNI LOGO WIDTH here (height auto) */
    --badge-opacity:0.6;          /* <<< Adjust Segwik badge TRANSPARENCY here (0–1) */
    --badge-size:20px;            /* Base font size in badge */
    --badge-gap:10px;             /* Spacing inside badge */
    --ink:#1f2937;
    --muted:#6b7280;
    --line:#e5e7eb;
    --card:#ffffff;
    --bg:#ffffff;
    --radius:12px;
  }

  *{ box-sizing:border-box; }
  body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    color:var(--ink);
    background:var(--bg);
  }
  .site{
    max-width: var(--container-w);
    margin: 0 auto;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .topbar{ background:var(--bni-red); height:var(--header-h); }
  .brand-row{
    display:flex; align-items:center; gap:16px;
    padding:18px 20px; border-bottom:1px solid #eee;
  }
  .brand-row .logo{ width:var(--brand-logo-w); height:auto; display:block; }

  .content{ flex:1 0 auto; padding:20px; background:#fff; }

  .title-row{
    display:flex; align-items:center; justify-content:space-between; gap:16px;
    margin:6px 0 18px;
  }
  .page-title{ margin:0; font-size:24px; font-weight:700; }
  .btn{
    appearance:none; border:0; background:var(--bni-red); color:#fff;
    font-weight:700; padding:10px 14px; border-radius:8px; cursor:pointer;
    font-size:14px; text-decoration:none; white-space:nowrap; display:inline-block;
  }
  .btn.secondary{
    background:#f3f4f6; color:#111; border:1px solid var(--line);
  }

  /* Cards grid */
  .cards{
    display:grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap:16px;
  }
  @media (max-width: 900px){
    .cards{ grid-template-columns: 1fr; }
  }

  .seek-card{
    position:relative;
    background:var(--card);
    border:1px solid var(--line);
    border-radius: var(--radius);
    padding:16px;
    box-shadow:0 8px 24px rgba(0,0,0,0.06);
  }
  .seek-head{
    display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    margin-bottom:10px;
  }
  .pill{
    display:inline-block; padding:6px 10px; border-radius:999px;
    font-size:12px; line-height:1; background:#f3f4f6; color:#111;
    border:1px solid var(--line);
  }
  .pill.red{
    background:#ffe6e9; color:#9a1027; border-color:#f2b7bf;
  }

  .seek-title{
    margin:0 0 6px; font-size:16px; font-weight:700;
  }
  .details{
    display:grid; gap:4px; font-size:14px;
  }
  .label{ font-weight:700; }
  .muted{ color:var(--muted); }

  .seek-actions{
    margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;
  }

  /* Inline referral form */
  .inline-form{
    margin-top:12px;
    border-top:1px dashed var(--line);
    padding-top:12px;
  }
  .row{ display:flex; gap:10px; align-items:center; }
  .row > *{ flex:1; }
  .field{ margin-bottom:10px; }
  .field .label{ display:block; font-size:13px; margin-bottom:6px; }
  input[type="text"], input[type="email"], input[type="tel"], textarea, select{
    width:100%;
    border:1px solid var(--line);
    border-radius:8px;
    padding:10px 12px;
    font-family: Arial, Helvetica, sans-serif;
    font-size:14px;
    outline:none;
  }
  textarea{ min-height:90px; resize:vertical; }
  .divider{
    height:1px; background:#e5e7eb; margin:6px 0 10px;
  }

  .footer{
    background:var(--bni-red); height:var(--footer-h);
    display:flex; align-items:center; justify-content:center; color:#fff; font-weight:600;
    letter-spacing:.3px;
  }

  .powered-by{
    position:fixed; right:18px; bottom:18px; z-index:9999;
    display:inline-flex; align-items:center; gap:var(--badge-gap);
    background:rgba(255,255,255,0.9); border:1px solid rgba(0,0,0,0.08);
    border-radius:999px; padding:8px 12px; box-shadow:0 6px 18px rgba(0,0,0,0.08);
    opacity:var(--badge-opacity); transition:opacity .2s ease; backdrop-filter:blur(6px);
  }
  .powered-by:hover{ opacity:1; }
  .powered-by span{ font-size:var(--badge-size); line-height:1; color:#111827; white-space:nowrap; }
  .powered-by img{ height:calc(var(--badge-size) + 6px); width:auto; display:block; }
</style>
</head>

<body>
  <div class="site">
    <div class="topbar" aria-hidden="true"></div>

    <div class="brand-row">
      <img class="logo" src="https://d34hmiuaex7c0.cloudfront.net/6568/uploads/cmaspages/gallery/galleryitem_1759854726598.png" alt="BNI Rock Solid Referrals Logo">
    </div>

    <main class="content" role="main">
      <div class="title-row">
        <h1 class="page-title">Seek of the Week — Submissions</h1>
        <a class="btn" href="#" id="goSubmit">Submit a Seek</a>
      </div>

      <section class="cards" id="cards">
        <!-- Cards will render here -->
      </section>
    </main>

    <footer class="footer" role="contentinfo">
      <div>BNI Rock Solid Referrals</div>
    </footer>
  </div>

  <!-- STICKY "Powered by Segwik" BADGE -->
  <a class="powered-by" href="https://segwik.com/" aria-label="Powered by Segwik (opens portal)" target="_blank" rel="noopener">
    <span>Powered by</span>
    <img src="https://d34hmiuaex7c0.cloudfront.net/6568/uploads/cmaspages/gallery/galleryitem_1759854883923.png" alt="Segwik">
  </a>

<script>
/* ===== Demo + persistence ===== */
const LIST_KEY = "bni_seek_requests_list_v1";
/* Try to load anything saved from the Submit page (v4 key). These won't have referrals yet. */
const SUBMIT_KEY = "bni_seeks_submit_only_v4";

/* Four example cards across three scenarios (order randomized on load). */
const demo = [
  // Specific Person
  {
    id: "d1", type:"person", referrals:[
      {id:"r1", name:"Casey Nguyen"},
      {id:"r2", name:"Michael Ortiz"},
    ],
    personFirst:"Jordan", personLast:"Lee", personCompany:"Lee Home Inspections",
    whatActions:"Warm email intro and include both parties.",
    whatSay:"Jordan helped our buyers avoid a costly issue — worth a quick chat.",
    notes:"Monmouth County homeowners preferred."
  },
  // Specific Company
  {
    id: "d2", type:"company", referrals:[
      {id:"r3", name:"Alex Wu"},
    ],
    companyName:"Acme Builders LLC",
    whatActions:"Intro via LinkedIn and share calendar link.",
    whatSay:"Pete’s team can streamline subcontractor onboarding.",
    notes:"Open to meeting on Fridays."
  },
  // Type of Person
  {
    id: "d3", type:"persona", referrals:[],
    personaIndustry:"Real Estate", personaTitle:"Office Manager", personaSeniority:"Mid-Level",
    whatActions:"Ask for a 15-minute discovery call.",
    whatSay:"We reduce admin back-and-forth with a simple portal.",
    notes:"Within 25 miles of Oakhurst."
  },
  // Another Specific Person
  {
    id: "d4", type:"person", referrals:[{id:"r4", name:"Sofia Patel"}],
    personFirst:"Dana", personLast:"Kim", personCompany:"",
    whatActions:"Make a group text intro.",
    whatSay:"Dana is a trusted adviser for investment buyers.",
    notes:"Best reached in afternoons."
  }
];

/* Utilities */
const $ = (s, el=document) => el.querySelector(s);
const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));
const uid = () => Math.random().toString(36).slice(2,9);

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function loadList(){
  const stored = localStorage.getItem(LIST_KEY);
  let list = stored ? JSON.parse(stored) : null;

  // If no stored list, seed from demo mixed with any submissions from submit page
  if(!list){
    let fromSubmit = [];
    const raw = localStorage.getItem(SUBMIT_KEY);
    if(raw){
      try{
        const subs = JSON.parse(raw);
        fromSubmit = subs.map(s => ({...s, referrals: s.referrals || []}));
      }catch(e){}
    }
    list = shuffle(demo.concat(fromSubmit));
    localStorage.setItem(LIST_KEY, JSON.stringify(list));
  }
  return list;
}

function saveList(list){
  localStorage.setItem(LIST_KEY, JSON.stringify(list));
}

/* Rendering */
function typeLabel(t){
  if(t==="person") return "Specific Person";
  if(t==="company") return "Specific Company";
  return "Type of Person";
}
function actionButtonText(t){
  if(t==="person") return "I know her/him";
  if(t==="company") return "I know this company";
  return "I know someone";
}
function headingText(t){
  const b = `<strong>${typeLabel(t)}</strong>`;
  return `A member is looking for a ${b}`;
}

function renderCard(req){
  const wrap = document.createElement("article");
  wrap.className = "seek-card";
  wrap.dataset.id = req.id;

  // Header
  const head = document.createElement("div");
  head.className = "seek-head";
  head.innerHTML = `
    <span class="pill">${typeLabel(req.type)}</span>
    <span class="pill red" data-role="count">${(req.referrals || []).length} referral${(req.referrals||[]).length===1?'':'s'}</span>
  `;

  // Title
  const title = document.createElement("h3");
  title.className = "seek-title";
  title.innerHTML = headingText(req.type);

  // Details
  const det = document.createElement("div");
  det.className = "details";

  if(req.type === "person"){
    const full = [req.personFirst, req.personLast].filter(Boolean).join(" ");
    det.innerHTML = `
      <div><span class="label">Name:</span> ${full || "—"}</div>
      <div><span class="label">Company:</span> ${req.personCompany || "—"}</div>
      <div><span class="label">How You Can Help or Get Involved:</span> ${req.whatActions || "—"}</div>
      <div><span class="label">What to Share or Talk About:</span> ${req.whatSay || "—"}</div>
      <div><span class="label">Additional Notes:</span> ${req.notes || "—"}</div>
    `;
  } else if(req.type === "company"){
    det.innerHTML = `
      <div><span class="label">Company:</span> ${req.companyName || "—"}</div>
      <div><span class="label">How You Can Help or Get Involved:</span> ${req.whatActions || "—"}</div>
      <div><span class="label">What to Share or Talk About:</span> ${req.whatSay || "—"}</div>
      <div><span class="label">Additional Notes:</span> ${req.notes || "—"}</div>
    `;
  } else {
    det.innerHTML = `
      <div><span class="label">Industry:</span> ${req.personaIndustry || "—"}</div>
      <div><span class="label">Job Title:</span> ${req.personaTitle || "—"}</div>
      <div><span class="label">Experience / Seniority:</span> ${req.personaSeniority || "—"}</div>
      <div><span class="label">How You Can Help or Get Involved:</span> ${req.whatActions || "—"}</div>
      <div><span class="label">What to Share or Talk About:</span> ${req.whatSay || "—"}</div>
      <div><span class="label">Additional Notes:</span> ${req.notes || "—"}</div>
    `;
  }

  // Action button
  const actions = document.createElement("div");
  actions.className = "seek-actions";
  const actBtn = document.createElement("button");
  actBtn.className = "btn";
  actBtn.textContent = actionButtonText(req.type);
  actions.appendChild(actBtn);

  // Inline form (created on demand)
  actBtn.addEventListener("click", () => toggleInlineForm(wrap, req));

  // Assemble
  wrap.appendChild(head);
  wrap.appendChild(title);
  wrap.appendChild(det);
  wrap.appendChild(actions);

  return wrap;
}

function toggleInlineForm(card, req){
  let form = card.querySelector(".inline-form");
  if(form){ form.remove(); return; }

  form = document.createElement("div");
  form.className = "inline-form";
  form.innerHTML = `
    <div class="row field">
      <div>
        <label class="label">Your First Name</label>
        <input type="text" data-f="first">
      </div>
      <div>
        <label class="label">Your Last Name</label>
        <input type="text" data-f="last">
      </div>
    </div>
    <div class="row field">
      <div>
        <label class="label">Your Company</label>
        <input type="text" data-f="company">
      </div>
      <div>
        <label class="label">Your Email</label>
        <input type="email" data-f="email">
      </div>
    </div>
    <div class="field">
      <label class="label">Your Phone</label>
      <input type="tel" data-f="phone">
    </div>

    <div class="divider"></div>

    ${req.type === "person" ? `
      <div class="field">
        <label class="label">Relationship / How you know them</label>
        <input type="text" data-f="relation">
      </div>
      <div class="field">
        <label class="label">Write a quick message to help them out</label>
        <textarea data-f="message"></textarea>
      </div>
    ` : req.type === "company" ? `
      <div class="field">
        <label class="label">Person you’re connected with in this company</label>
        <input type="text" data-f="contactName">
      </div>
      <div class="field">
        <label class="label">Relationship / How you know them</label>
        <input type="text" data-f="relation">
      </div>
      <div class="field">
        <label class="label">Write a quick message to help them out</label>
        <textarea data-f="message"></textarea>
      </div>
    ` : `
      <div class="field">
        <label class="label">Name of the Person you know</label>
        <input type="text" data-f="contactName">
      </div>
      <div class="field">
        <label class="label">Relationship / How you know them</label>
        <input type="text" data-f="relation">
      </div>
      <div class="field">
        <label class="label">Write a quick message to help them out</label>
        <textarea data-f="message"></textarea>
      </div>
    `}

    <div class="seek-actions">
      <button class="btn" data-action="offer">Offer an Introduction</button>
      <button class="btn secondary" data-action="cancel">Cancel</button>
    </div>
  `;

  card.appendChild(form);

  form.querySelector('[data-action="cancel"]').addEventListener("click", () => {
    form.remove();
  });

  form.querySelector('[data-action="offer"]').addEventListener("click", () => {
    const val = (n) => (form.querySelector(`[data-f="${n}"]`)?.value || "").trim();

    // Basic required: your name + (email or phone)
    const first = val("first"), last = val("last"), email = val("email"), phone = val("phone");
    if(!first || !last){ alert("Please provide your first and last name."); return; }
    if(!email && !phone){ alert("Please provide your email or phone."); return; }

    const referral = {
      id: uid(),
      yourFirst:first,
      yourLast:last,
      yourCompany: val("company"),
      yourEmail: email,
      yourPhone: phone,
      contactName: val("contactName"),
      relation: val("relation"),
      message: val("message"),
      createdAt: Date.now()
    };

    addReferralTo(req.id, referral);
    form.remove();

    // Update count UI
    const countEl = card.querySelector('[data-role="count"]');
    const list = getAll();
    const found = list.find(x => x.id === req.id);
    const count = (found?.referrals || []).length;
    if(countEl) countEl.textContent = `${count} referral${count===1?'':'s'}`;
  });
}

/* Data ops */
function getAll(){ return JSON.parse(localStorage.getItem(LIST_KEY) || "[]"); }
function renderAll(){
  const cardsWrap = $("#cards");
  cardsWrap.innerHTML = "";
  const all = getAll();
  all.forEach(req => {
    if(!req.referrals) req.referrals = [];
    cardsWrap.appendChild(renderCard(req));
  });
}
function addReferralTo(reqId, referral){
  const all = getAll();
  const idx = all.findIndex(r => r.id === reqId);
  if(idx === -1) return;
  all[idx].referrals = all[idx].referrals || [];
  all[idx].referrals.push(referral);
  saveList(all);
}

/* Init */
(function init(){
  loadList();  // seeds if empty
  renderAll();

  // Hook "Submit a Seek" button to your create page when ready
  $("#goSubmit").addEventListener("click", (e) => {
    e.preventDefault();
    // Replace with actual URL to the Submit page
    alert("Hook this to your Seek submission page URL.");
  });
})();
</script>
</body>
</html>
